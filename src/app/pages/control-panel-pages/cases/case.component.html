<div>
    <div class="flex items-center justify-center">
        <div class="text-3xl mb-8">
            {{ 'add-case' | translate }}
        </div>
        <div *ngIf="showTooltip" class="group relative w-max">
            <button (mouseenter)="showCaseTooltipInfo = true" (mouseleave)="showCaseTooltipInfo = false"
                class="w-4 h-4 rounded-full bg-red-400 text-white flex items-center justify-center hover:bg-red-800 cursor-pointer ml-2 mb-7">
                ?
            </button>
            <span *ngIf="showCaseTooltipInfo"
                class="pointer-events-none absolute px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg -top-11 left-0 whitespace-normal w-max transition-opacity opacity-100">
                {{ 'add-case-tooltip-info' | translate }}
            </span>
        </div>
    </div>
    <div class="flex justify-center">
        <mat-horizontal-stepper [linear]="true" [formGroup]="form" *ngIf="!isMobile">
            <mat-step [stepControl]="form.get('step1')">
                <ng-template matStepLabel class="custom-step-label">{{ 'save-as' | translate }}</ng-template>
                <div class="flex justify-center gap-5 mt-10">
                    <div class="flex flex-col w-1/2">
                        <div class="w-full">
                            <input type="text" (input)="saveFormValues(1)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="case-name" formControlName="case-name" placeholder="{{ 'case-name' | translate }}">
                        </div>
                        <div class="flex justify-center mt-5">
                            <div class="flex flex-col">
                                <div>{{ 'choose-language' | translate }}</div>
                                <div class="flex justify-center mt-2">
                                    <div class="relative w-1/2" [class.open]="langDropdownOpen">
                                        <div class="flex items-center w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                                            (click)="toggleLangDropdown()" [class.rounded-t]="langDropdownOpen"
                                            [class.rounded]="!langDropdownOpen">
                                            <div class="w-4 h-4 rounded bg-no-repeat bg-center bg-cover mr-2"
                                                [class.bg-polandFlag]="selectedLanguageOption === 'PL'"
                                                [class.bg-englishFlag]="selectedLanguageOption === 'EN'">
                                            </div>
                                            <div class="flex-grow">
                                                {{ selectedLanguageOption }}
                                            </div>
                                        </div>
                                        <span
                                            class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-1/2 -translate-y-1/2"
                                            [class.rotate-180]="langDropdownOpen" [class.rotate-0]="!langDropdownOpen">
                                        </span>
                                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                                            [class.scale-y-0]="!langDropdownOpen"
                                            [class.scale-y-100]="langDropdownOpen">
                                            <li *ngFor="let option of languageDropdownOptions"
                                                class="py-2 px-3 cursor-pointer hover:bg-gray-100 flex items-center"
                                                (click)="selectLangOption(option)"
                                                [class.selected]="option === selectedLanguageOption">
                                                <div class="w-4 h-4 rounded bg-no-repeat bg-center bg-cover mr-2"
                                                    [class.bg-polandFlag]="option === 'PL'"
                                                    [class.bg-englishFlag]="option === 'EN'">
                                                </div>
                                                {{ option }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end mt-5">
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step2')">
                <ng-template matStepLabel class="custom-step-label"> {{ 'affected-patient' | translate }}</ng-template>
                <div class="flex flex-col md:flex-row justify-center gap-5 mt-10">
                    <div class="relative" [class.open]="genderDropdownOpen">
                        <input type="text"
                            class="w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                            placeholder="{{ 'gender' | translate }}" (click)="toggleGenderDropdown()"
                            [class.rounded-t]="genderDropdownOpen" [class.rounded]="!genderDropdownOpen"
                            [value]="selectedGenderOption" readonly>
                        <span
                            class="caret select-none text-xl font-bold transition duration-150 transform absolute right-3 top-5 md:top-[18px] -translate-y-1/2"
                            [class.rotate-180]="genderDropdownOpen" [class.rotate-0]="!genderDropdownOpen">
                        </span>
                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                            [class.scale-y-0]="!genderDropdownOpen" [class.scale-y-100]="genderDropdownOpen">
                            <li *ngFor="let option of genderDropdownOptions"
                                class="py-2 px-3 cursor-pointer hover:bg-gray-100" (click)="selectGenderOption(option)"
                                [class.selected]="option === selectedGenderOption">
                                {{ option }}
                            </li>
                        </ul>
                    </div>
                    <div class="w-full md:w-1/2">
                        <div class="mb-3 relative">
                            <div class="absolute bottom-9 left-0 flex items-center justify-center">
                                <div>{{ 'first-range' | translate }}</div>
                                <div *ngIf="showTooltip" class="group relative w-max">
                                    <button (mouseenter)="showAgeTooltipInfo = true"
                                        (mouseleave)="showAgeTooltipInfo = false"
                                        class="w-4 h-4 rounded-full bg-red-400 text-white flex items-center justify-center hover:bg-red-800 cursor-pointer ml-2">
                                        ?
                                    </button>
                                    <span *ngIf="showAgeTooltipInfo"
                                        class="pointer-events-none absolute px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg -bottom-6 left-9 whitespace-normal w-max transition-opacity opacity-100">
                                        {{ 'age-tooltip-info' | translate }}
                                    </span>
                                </div>
                            </div>
                            <input type="number" (input)="saveFormValues(3)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="first-min" formControlName="first-min" placeholder="Min">
                        </div>
                        <div class="mb-3">
                            <input type="number" (input)="saveFormValues(4)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="first-max" formControlName="first-max" placeholder="Max">
                        </div>
                        <div class="mt-4 flex justify-center" *ngIf="!showSecondRangeForm">
                            <div class="w-8 h-8 flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold rounded-full select-none cursor-pointer relative"
                                (click)="addSecondRangeForm()">
                                <div class="text-2xl absolute bottom-[1px]">+</div>
                            </div>
                        </div>
                        <div class="mt-6" *ngIf="showSecondRangeForm">
                            <div class="mb-3 relative flex items-center">
                                <div class="absolute w-full bottom-9 left-0 flex justify-between items-center">
                                    <div>{{ 'second-range' | translate }}</div>
                                    <div class="w-5 h-4 flex items-center justify-center bg-red-500 hover:bg-red-700 font-bold text-white rounded-sm select-none cursor-pointer relative"
                                        (click)="removeSecondRangeForm()">
                                        <div class="text-base">-</div>
                                    </div>
                                </div>
                                <input type="number" (input)="saveFormValues(5)"
                                    class="appearance-none border rounded w-full  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    id="second-min" formControlName="second-min" placeholder="Min">
                            </div>
                            <div class="mb-3">
                                <input type="number" (input)="saveFormValues(6)"
                                    class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    id="second-max" formControlName="second-max" placeholder="Max">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step3')">
                <ng-template matStepLabel>{{ 'disease-info' | translate }}</ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div>
                        <div class="relative" [class.open]="anemiaDropdownOpen">
                            <input type="text"
                                class="w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                                placeholder="{{ 'anemia-type' | translate }}" (click)="toggleAnemiaDropdown()"
                                [class.rounded-t]="anemiaDropdownOpen" [class.rounded]="!anemiaDropdownOpen"
                                [value]="selectedAnemiaOption" readonly>
                            <span
                                class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-5 -translate-y-1/2"
                                [class.rotate-180]="anemiaDropdownOpen" [class.rotate-0]="!anemiaDropdownOpen">
                            </span>
                            <ul class="absolute left-0 right-0 max-h-32 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                                [class.scale-y-0]="!anemiaDropdownOpen" [class.scale-y-100]="anemiaDropdownOpen">
                                <li *ngFor="let option of anemiaTypesOptions"
                                    class="py-2 px-3 cursor-pointer hover:bg-gray-100"
                                    (click)="selectAnemiaOption(option)"
                                    [class.selected]="option === selectedAnemiaOption">
                                    {{ option }}
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="mb-3 mt-5">
                        <textarea type="text" (input)="saveFormValues(2)" style="resize: none;"
                            class="appearance-none border rounded w-full h-28 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="diagnosis" formControlName="diagnosis"
                            placeholder="{{ 'diagnosis' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step4')">
                <ng-template matStepLabel>{{ 'patient-details-1' | translate }}</ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div>
                        <textarea type="text" (input)="saveFormValues(10)" style="resize: none;"
                            class="appearance-none border rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="hr" formControlName="hr" placeholder="HR"></textarea>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(11)" style="resize: none;"
                            class="appearance-none border rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="rr" formControlName="rr" placeholder="{{ 'RR' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step5')">
                <ng-template matStepLabel>{{ 'patient-details-2' | translate }}</ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div class="flex justify-between">
                        <div>
                            <input type="number" (input)="saveFormValues(14)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="bodyMass" formControlName="bodyMass" placeholder="{{ 'body-mass' | translate }}">
                        </div>
                        <div>
                            <input type="number" (input)="saveFormValues(15)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="height" formControlName="height" placeholder="{{ 'height' | translate }}">
                        </div>
                        <div>
                            <input type="number" (input)="saveFormValues(16)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="bmi" formControlName="bmi" placeholder="BMI[kg/m^2]">
                        </div>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(12)" style="resize: none;"
                            class="appearance-none border rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="description" formControlName="description"
                            placeholder="{{ 'description' | translate }}"></textarea>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(13)" style="resize: none;"
                            class="appearance-none border rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="infoCom" formControlName="infoCom"
                            placeholder="{{ 'information-and-comments' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-start mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                </div>
            </mat-step>
        </mat-horizontal-stepper>
        <mat-vertical-stepper [linear]="true" [formGroup]="form" *ngIf="isMobile">
            <mat-step [stepControl]="form.get('step1')">
                <ng-template matStepLabel class="custom-step-label">{{ 'save-as' | translate }}</ng-template>
                <div class="flex justify-center gap-5 mt-10">
                    <div class="flex flex-col w-full">
                        <div class="w-full">
                            <input type="text" (input)="saveFormValues(1)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="case-name" formControlName="case-name" placeholder="{{ 'case-name' | translate }}">
                        </div>
                        <div class="flex justify-center mt-5">
                            <div class="flex flex-col">
                                <div>{{ 'choose-language' | translate }}</div>
                                <div class="flex justify-center mt-2">
                                    <div class="relative w-1/2" [class.open]="langDropdownOpen">
                                        <div class="flex items-center w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                                            (click)="toggleLangDropdown()" [class.rounded-t]="langDropdownOpen"
                                            [class.rounded]="!langDropdownOpen">
                                            <div class="w-4 h-4 rounded bg-no-repeat bg-center bg-cover mr-2"
                                                [class.bg-polandFlag]="selectedLanguageOption === 'PL'"
                                                [class.bg-englishFlag]="selectedLanguageOption === 'EN'">
                                            </div>
                                            <div class="flex-grow">
                                                {{ selectedLanguageOption }}
                                            </div>
                                        </div>
                                        <span
                                            class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-1/2 -translate-y-1/2"
                                            [class.rotate-180]="langDropdownOpen" [class.rotate-0]="!langDropdownOpen">
                                        </span>
                                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                                            [class.scale-y-0]="!langDropdownOpen"
                                            [class.scale-y-100]="langDropdownOpen">
                                            <li *ngFor="let option of languageDropdownOptions"
                                                class="py-2 px-3 cursor-pointer hover:bg-gray-100 flex items-center"
                                                (click)="selectLangOption(option)"
                                                [class.selected]="option === selectedLanguageOption">
                                                <div class="w-4 h-4 rounded bg-no-repeat bg-center bg-cover mr-2"
                                                    [class.bg-polandFlag]="option === 'PL'"
                                                    [class.bg-englishFlag]="option === 'EN'">
                                                </div>
                                                {{ option }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end mt-5">
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step2')">
                <ng-template matStepLabel>{{ 'affected-patient' | translate }}</ng-template>
                <div class="flex flex-col md:flex-row justify-center gap-5 mt-10">
                    <div class="relative" [class.open]="genderDropdownOpen">
                        <input type="text"
                            class="w-full text-xs border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                            placeholder="{{ 'gender' | translate }}" (click)="toggleGenderDropdown()"
                            [class.rounded-t]="genderDropdownOpen" [class.rounded]="!genderDropdownOpen"
                            [value]="selectedGenderOption" readonly>
                        <span
                            class="caret top-[18px] text-base font-bold transition duration-150 transform absolute right-3 -translate-y-1/2"
                            [class.rotate-180]="genderDropdownOpen" [class.rotate-0]="!genderDropdownOpen">
                        </span>
                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                            [class.scale-y-0]="!genderDropdownOpen" [class.scale-y-100]="genderDropdownOpen">
                            <li *ngFor="let option of genderDropdownOptions"
                                class="py-2 px-3 cursor-pointer text-xs hover:bg-gray-100"
                                (click)="selectGenderOption(option)" [class.selected]="option === selectedGenderOption">
                                {{ option }}
                            </li>
                        </ul>
                    </div>
                    <div class="w-full mt-2 md:w-1/2">
                        <div class="mb-3 relative">
                            <div class="absolute bottom-9 left-0">{{ 'first-range' | translate }}</div>
                            <input type="number" (input)="saveFormValues(3)"
                                class="appearance-none border text-xs rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="first-min" formControlName="first-min" placeholder="Min">
                        </div>
                        <div class="mb-3">
                            <input type="number" (input)="saveFormValues(4)"
                                class="appearance-none border rounded w-full text-xs py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="first-max" formControlName="first-max" placeholder="Max">
                        </div>
                        <div class="mt-4 flex justify-center" *ngIf="!showSecondRangeForm">
                            <div class="w-8 h-8 flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold rounded-full select-none cursor-pointer relative"
                                (click)="addSecondRangeForm()">
                                <div class="text-2xl absolute bottom-[1px]">+</div>
                            </div>
                        </div>
                        <div class="mt-8" *ngIf="showSecondRangeForm">
                            <div class="mb-3 relative flex items-center">
                                <div class="absolute w-full bottom-9 left-0 flex justify-between items-center">
                                    <div>{{ 'second-range' | translate }}</div>
                                    <div class="w-5 h-4 flex items-center justify-center bg-red-500 hover:bg-red-700 font-bold text-white rounded-sm select-none cursor-pointer relative"
                                        (click)="removeSecondRangeForm()">
                                        <div class="text-base">-</div>
                                    </div>
                                </div>
                                <input type="number" (input)="saveFormValues(5)"
                                    class="appearance-none border rounded w-full text-xs py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    id="second-min" formControlName="second-min" placeholder="Min">
                            </div>
                            <div class="mb-3">
                                <input type="number" (input)="saveFormValues(6)"
                                    class="appearance-none border rounded w-full text-xs py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    id="second-max" formControlName="second-max" placeholder="Max">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step3')">
                <ng-template matStepLabel>{{ 'disease-info' | translate }} </ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div>
                        <div class="relative" [class.open]="anemiaDropdownOpen">
                            <input type="text"
                                class="w-full border cursor-pointer text-xs rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                                placeholder="{{ 'anemia-type' | translate }}" (click)="toggleAnemiaDropdown()"
                                [class.rounded-t]="anemiaDropdownOpen" [class.rounded]="!anemiaDropdownOpen"
                                [value]="selectedAnemiaOption" readonly>
                            <span
                                class="caret text-base font-bold transition duration-150 transform absolute right-3 top-[18px] -translate-y-1/2"
                                [class.rotate-180]="anemiaDropdownOpen" [class.rotate-0]="!anemiaDropdownOpen">
                            </span>
                            <ul class="absolute left-0 right-0 max-h-32  overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                                [class.scale-y-0]="!anemiaDropdownOpen" [class.scale-y-100]="anemiaDropdownOpen">
                                <li *ngFor="let option of anemiaTypesOptions"
                                    class="py-2 px-3 cursor-pointer text-xs hover:bg-gray-100"
                                    (click)="selectAnemiaOption(option)"
                                    [class.selected]="option === selectedAnemiaOption">
                                    {{ option }}
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="mb-3 mt-1">
                        <textarea type="text" (input)="saveFormValues(2)" style="resize: none;"
                            class="appearance-none border rounded text-xs w-full h-28 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="diagnosis" formControlName="diagnosis"
                            placeholder="{{ 'diagnosis' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step4')">
                <ng-template matStepLabel>{{ 'patient-details-1' | translate }}</ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div>
                        <textarea type="text" (input)="saveFormValues(10)" style="resize: none;"
                            class="appearance-none border text-xs rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="hr" formControlName="hr" placeholder="HR"></textarea>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(11)" style="resize: none;"
                            class="appearance-none border text-xs rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="rr" formControlName="rr" placeholder="{{ 'RR' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-between mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                    <button mat-stroked-button matStepperNext>{{ 'next' | translate }}</button>
                </div>
            </mat-step>
            <mat-step [stepControl]="form.get('step5')">
                <ng-template matStepLabel>{{ 'patient-details-2' | translate }}</ng-template>
                <div class="flex flex-col justify-center gap-5 mt-10">
                    <div class="flex flex-col gap-2">
                        <div>
                            <input type="number" (input)="saveFormValues(14)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="bodyMass" formControlName="bodyMass" placeholder="{{ 'body-mass' | translate }}">
                        </div>
                        <div>
                            <input type="number" (input)="saveFormValues(15)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="height" formControlName="height" placeholder="{{ 'height' | translate }}">
                        </div>
                        <div>
                            <input type="number" (input)="saveFormValues(16)"
                                class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="bmi" formControlName="bmi" placeholder="BMI[kg/m^2]">
                        </div>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(12)" style="resize: none;"
                            class="appearance-none border text-xs rounded w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="description" formControlName="description"
                            placeholder="{{ 'description' | translate }}"></textarea>
                    </div>
                    <div>
                        <textarea type="text" (input)="saveFormValues(13)" style="resize: none;"
                            class="appearance-none border rounded text-xs w-full py-2 h-28 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="infoCom" formControlName="infoCom"
                            placeholder="{{ 'information-and-comments' | translate }}"></textarea>
                    </div>
                </div>
                <div class="flex justify-start mt-5">
                    <button mat-stroked-button matStepperPrevious>{{ 'back' | translate }}</button>
                </div>
            </mat-step>
        </mat-vertical-stepper>
    </div>
    <div class="w-full flex flex-col mb-6">
        <div class="flex justify-center mb-4">
            <hr class="mt-4 border-black w-full md:w-3/4">
        </div>
        <div class="flex items-center justify-center">
            <span class="flex mb-3 text-xl">{{ 'add-abnormalities' | translate }}</span>
            <div *ngIf="showTooltip" class="group relative w-max">
                <button (mouseenter)="showAbnormalTooltipInfo = true" (mouseleave)="showAbnormalTooltipInfo = false"
                    class="w-4 h-4 rounded-full bg-red-400 text-white flex items-center justify-center hover:bg-red-800 cursor-pointer ml-2 mb-3">
                    ?
                </button>
                <span *ngIf="showAbnormalTooltipInfo"
                    class="pointer-events-none absolute px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg -top-16 left-0 whitespace-normal w-[465px] transition-opacity opacity-100">
                    {{ 'add-abnormalities-tooltip-info' | translate }}
                </span>
            </div>
        </div>
        <div class="flex justify-center mb-3">
            <div class="w-full md:w-3/4 flex flex-col bg-gray-200 rounded-md">
                <div *ngFor="let item of addedValues" class="flex flex-row my-1 justify-between items-center">
                    <div class="flex flex-col md:flex-row justify-between w-3/4">
                        <div class="ml-3">
                            {{ 'parameter' | translate }} {{ item.parameter }}
                        </div>
                        <div class="ml-3">
                            {{ 'unit1' | translate }} {{ item.unit }}
                        </div>
                        <div class="ml-3">
                            {{ 'range1' | translate }}
                            {{ item.minValue + ' - ' + item.maxValue }}
                        </div>
                        <div class="ml-3">
                            {{ 'level-type1' | translate }} {{ item.type }}
                        </div>
                    </div>
                    <div class="bg-red-500 hover:bg-red-700 text-white font-bold p-1 px-3 rounded cursor-pointer text-center mr-2"
                        (click)="removeValue(item)">
                        -
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="!isSum100 && doesContainWhiteBloodCells" class="flex justify-center">
            <div class='py-2 px-5 bg-gray-100 rounded-md flex flex-row mb-5 items-center'>
                <div
                    class="w-4 h-4 rounded-full bg-red-400 text-white text-xs flex items-center justify-center hover:bg-red-800 cursor-pointer mr-2">
                    !
                </div>
                <span class="text-xs">Sum of White blood cells max values doesnt equal to 100%</span>
            </div>
        </div>
        <div class="flex justify-center">
            <form [formGroup]="parameterForm" class="w-full md:w-3/4">
                <div class="flex flex-col lg:flex-row justify-center gap-2">
                    <div class="relative w-full lg:w-1/4" [class.open]="parameterDropdownOpen">
                        <input type="text"
                            class="w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                            placeholder="{{ 'exam-table-th-param' | translate }}" (click)="toggleParameterDropdown()"
                            [class.rounded-t]="parameterDropdownOpen" [class.rounded]="!parameterDropdownOpen"
                            [value]="selectedParameterOption" readonly>
                        <span
                            class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-1/2 -translate-y-1/2"
                            [class.rotate-180]="parameterDropdownOpen" [class.rotate-0]="!parameterDropdownOpen">
                        </span>
                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                            [class.scale-y-0]="!parameterDropdownOpen" [class.scale-y-100]="parameterDropdownOpen">
                            <li *ngFor="let option of parameterDropdownOptions"
                                class="py-2 px-3 cursor-pointer hover:bg-gray-100"
                                (click)="selectParameterOption(option)"
                                [class.selected]="option === selectParameterOption">
                                {{ option }}
                            </li>
                        </ul>
                    </div>
                    <div class="relative w-full lg:w-1/4" [class.open]="unitDropdownOpen"
                        [class.pointer-events-none]="disabledUnit">
                        <input type="text"
                            class="w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                            placeholder="{{ 'unit' | translate }}" (click)="toggleUnitDropdown()"
                            [class.rounded-t]="unitDropdownOpen" [class.rounded]="!unitDropdownOpen"
                            [value]="selectedUnitOption" readonly>
                        <span [class.hidden]="disabledUnit"
                            class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-1/2 -translate-y-1/2"
                            [class.rotate-180]="unitDropdownOpen" [class.rotate-0]="!unitDropdownOpen">
                        </span>
                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                            [class.scale-y-0]="!unitDropdownOpen" [class.scale-y-100]="unitDropdownOpen">
                            <li *ngFor="let option of unitDropdownOptions"
                                class="py-2 px-3 cursor-pointer hover:bg-gray-100" (click)="selectUnitOption(option)"
                                [class.selected]="option === selectedUnitOption">
                                {{ option }}
                            </li>
                        </ul>
                    </div>
                    <div class="w-full lg:w-1/5">
                        <input type="number" (input)="saveFormValues(8)"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="parameter-min" formControlName="parameter-min"
                            placeholder="{{ 'min-value' | translate }}" [class.pointer-events-none]="disabledRange"
                            [class.bg-gray-100]="disabledRange" [class.border-gray-300]="disabledRange">
                    </div>
                    <div class="w-full lg:w-1/5">
                        <input type="number" (input)="saveFormValues(9)"
                            class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="parameter-max" formControlName="parameter-max"
                            placeholder="{{ 'max-value' | translate }}" [class.pointer-events-none]="disabledRange"
                            [class.bg-gray-100]="disabledRange" [class.border-gray-300]="disabledRange">
                    </div>
                    <div class="relative" [class.open]="levelTypeDropdownOpen">
                        <input type="text"
                            class="w-full border cursor-pointer rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white"
                            placeholder="{{ 'level-type' | translate }}" (click)="toggleLevelTypeDropdown()"
                            [class.rounded-t]="levelTypeDropdownOpen" [class.rounded]="!levelTypeDropdownOpen"
                            [value]="selectedLevelTypeOption" readonly>
                        <span
                            class="caret text-xl font-bold transition duration-150 transform absolute right-3 top-1/2 -translate-y-1/2"
                            [class.rotate-180]="levelTypeDropdownOpen" [class.rotate-0]="!levelTypeDropdownOpen">
                        </span>
                        <ul class="absolute left-0 right-0 max-h-48 overflow-y-auto bg-white border rounded-b transition origin-top duration-150 z-20"
                            [class.scale-y-0]="!levelTypeDropdownOpen" [class.scale-y-100]="levelTypeDropdownOpen">
                            <li *ngFor="let option of levelTypeDropdownOptions"
                                class="py-2 px-3 cursor-pointer hover:bg-gray-100"
                                (click)="selectLevelTypeOption(option)"
                                [class.selected]="option === selectedLevelTypeOption">
                                {{ option }}
                            </li>
                        </ul>
                    </div>
                    <div>
                        <div class="bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 rounded cursor-pointer text-center"
                            (click)="addValue()">
                            {{ 'add' | translate }}
                        </div>
                    </div>
                </div>
                <div class="flex justify-center md:justify-end mt-10">
                    <div (click)="createCaseWithAbnormality()"
                        class="w-full md:w-40 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 text-center rounded cursor-pointer">
                        {{ 'create-case' | translate }}
                    </div>
                </div>
            </form>
        </div>
    </div>
    <hr class="mb-6 border-black w-full">
    <app-case-table></app-case-table>
    <notifier-container></notifier-container>
</div>